<script lang="ts">
  import { Story } from 'kitbook';
  import Map from '$lib/maps/mapbox/map/Map.svelte';
  import NavigationControl from '$lib/maps/mapbox/controls/NavigationControl.svelte';
  import GeolocateControl from '$lib/maps/mapbox/controls/GeolocateControl.svelte';
  import Geocoder from '$lib/maps/mapbox/geocoder/Geocoder.svelte';
  import ScaleControl from '$lib/maps/mapbox/controls/ScaleControl.svelte';
  import Marker from '$lib/maps/mapbox/map/Marker.svelte';
  import ToggleStyle from '$lib/maps/mapbox/controls/ToggleStyle.svelte';
</script>

# Mapbox

From https://github.com/beyonk-adventures/svelte-mapbox

<Story
  name="Set Marker"
  knobs={{ lng: -95, lat: 39 }}
  let:props={{ lng, lat }}
  let:set
  height={400}>
  <Map
    {lng}
    {lat}
    on:click={(e) => {
      set('lng', e.detail.lng);
      set('lat', e.detail.lat);
    }}>
    <Marker {lng} {lat} />
  </Map>
</Story>

<Story name="Everything" knobs={{ showControls: true }} let:props={{ showControls }} height={400}>
  <Map
    on:dragend={(e) => console.info(e.detail)}
    on:moveend={(e) => console.info(e.detail)}
    on:click={(e) => console.info({ lng: e.detail.lng, lat: e.detail.lat })}
    on:zoomend={(e) => console.info(e.detail)}
    on:error={(e) => console.info(e.detail)}>
    {#if showControls}
      <Geocoder
        placeholder={'Search Places'}
        on:clear={() => console.info('cleared')}
        on:loading={(e) => console.info(e.detail)}
        on:result={(e) => console.info(e.detail)}
        on:resultCoordinates={(e) => console.info(e.detail)}
        on:results={(e) => console.info(e.detail)}
        on:error={(e) => console.info(e.detail)} />
      <NavigationControl />
      <GeolocateControl
        on:geolocate={(e) => console.info(e.detail)}
        on:outofmaxbounds={(e) => console.info(e.detail)}
        on:trackuserlocationstart={(e) => console.info(e.detail)}
        on:trackuserlocationend={(e) => console.info(e.detail)}
        on:error={(e) => console.info(e.detail)} />
      <ScaleControl />
      <ToggleStyle />
    {/if}
  </Map>
</Story>

<Story name="globe" height={400}>
  <Map options={{ projection: { name: 'globe' } }} />
</Story>
